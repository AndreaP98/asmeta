<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="it"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../jacoco-resources/report.gif" type="image/gif"/><title>ParserResultLogger.java</title><link rel="stylesheet" href="../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../index.html" class="el_report">report.aggregate</a> &gt; <a href="../index.html" class="el_bundle">asmeta.parser</a> &gt; <a href="index.source.html" class="el_package">org.asmeta.parser</a> &gt; <span class="el_source">ParserResultLogger.java</span></div><h1>ParserResultLogger.java</h1><pre class="source lang-java linenums">package org.asmeta.parser;

import java.io.File;
import java.util.ArrayList;
import java.util.List;

import org.apache.log4j.Appender;
import org.apache.log4j.Level;
import org.apache.log4j.Logger;

/** when the parser encounter an error or a warning or whatever, uses this logger
 * which keeps track for example of the errors and line numbers
 * 
 * @author garganti
 * 
 * Log4j by default can log messages with five priority levels.

   1. Use debug to write debugging messages which should not be printed when the application is 
   		in production.
   2. Use info for messages similar to the &quot;verbose&quot; mode of many applications.
   3. Use warn for warning messages which are logged to some log but the application is able to 
   		carry on without a problem.
   4. Use error for application error messages which are also logged to some log but, still, 
   	the application can hobble along. Such as when some administrator-supplied configuration 
   	parameter is incorrect and you fall back to using some hard-coded default value.
   	A ParseException is an Error
   5. Use fatal for critical messages, after logging of which the application quits abnormally.
   Other exception are fatal 
 *
 * FOR THE PARSER
 *  1. debug: info for debugging (entering and exiting methods)
 *  2. info: like verbose mode (reading file, etc.)
 *  3. warn: like now warn++
 *  4. err: like now errors, parse Exception
 *  5. fatal: other exceptions
 */
public class ParserResultLogger { // DO NOT EXTEND LOGGER !!! USE COMPOSITION TO CHECK extends Logger{
	
	private Logger log;
	
<span class="fc" id="L41">	public ParserResultLogger() {</span>
		// get the logger for the parser
<span class="fc" id="L43">		log = Logger.getLogger(&quot;org.asmeta.parser&quot;);</span>
		//log.setLevel(Level.OFF);
		// if there are no appenders, a warning will be printed
//		if (!log.getAllAppenders().hasMoreElements())
//			log.addAppender(new ConsoleAppender(new SimpleLayout()));
<span class="fc" id="L48">	}</span>
	

	/** last Parse Exception generated before exiting*/
<span class="fc" id="L52">	public ParseException lastParseError = null;</span>
	
	/** list of warnings */
<span class="fc" id="L55">	public List&lt;String&gt; warnings = new ArrayList&lt;String&gt;();</span>
	
<span class="nc" id="L57">	public int getWarnNum(){return warnings.size();}</span>

	/** list of errors */
<span class="fc" id="L60">	public List&lt;String&gt; errors = new ArrayList&lt;String&gt;();</span>

<span class="nc" id="L62">	public int getErrorNum(){return errors.size();}</span>
	
	// fatal
	public void fatal(Object o){		
<span class="nc" id="L66">		log.fatal(o);</span>
<span class="nc" id="L67">	}</span>
	
	
	/** logs a ParseException: print the messages and keep track of the last ParseExeception
	 * ERRORS
	 * */
	public void logPE(ParseException pe){		
<span class="nc" id="L74">		logErr(pe.getMessage());</span>
		// genera eccezione se cerca di capire qual e' il token
		// perche' pe.currentToken == null		
<span class="nc bnc" id="L77" title="All 2 branches missed.">		if (pe.currentToken !=null) logErr(&quot;Line &quot;+ pe.currentToken.beginLine + &quot; column &quot;+ pe.currentToken.beginColumn);</span>
		// add to the errors
<span class="nc" id="L79">		lastParseError = pe;</span>
<span class="nc" id="L80">	}</span>
	
	/** logs some errors */
	public void logErr(String s){	
<span class="nc" id="L84">		errors.add(s);</span>
<span class="nc" id="L85">		log.error(s);</span>
<span class="nc" id="L86">	}</span>
	
	/** logs some errors + info about the line and so on*/
	public void logErr(String s, Token current){		
<span class="nc" id="L90">		log.error(s);</span>
<span class="nc" id="L91">		log.error(&quot;at line&quot; + current.beginLine);</span>
<span class="nc" id="L92">	}</span>
	// DEBUG
	public void logDebug(String s){
<span class="fc" id="L95">		log.debug(&quot;LOGGGER &quot; + log.getName() + &quot; &quot; + log.getLevel());</span>
<span class="fc" id="L96">		log.debug(s);</span>
<span class="fc" id="L97">	}</span>

	// INFO
	public void logInfo(String s){
<span class="fc" id="L101">		log.info(s);</span>
<span class="fc" id="L102">	}</span>

	// WARNING
	
	public void logWarning(String s){
<span class="fc" id="L107">		warnings.add(s);</span>
<span class="fc" id="L108">		log.warn(s);</span>
<span class="fc" id="L109">	}</span>
	
	// add appender	
	public void addAppender(Appender arg0){
<span class="nc" id="L113">		log.addAppender(arg0);</span>
<span class="nc" id="L114">	}</span>

	
	// reset 
	public void resetForParsing(File f){
<span class="fc" id="L119">		clear();</span>
<span class="fc" id="L120">	}</span>

	/**
	 * 
	 */
	public void clear() {
<span class="fc" id="L126">		lastParseError = null;</span>
<span class="fc" id="L127">		warnings.clear();</span>
<span class="fc" id="L128">		errors.clear();</span>
<span class="fc" id="L129">	}</span>
	
	public void setLevel(Level level) {
<span class="nc" id="L132">		log.setLevel(level);</span>
<span class="nc" id="L133">	}</span>
	
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.7.9.201702052155</span></div></body></html>