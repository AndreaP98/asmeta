--file D:\GitHub\ASMETA\mvm-asmeta\VentilatoreASM_NewTime\Ventilatore4SimpleTime.smv
-- options: flatten? false
@TIME_DOMAIN continuous
MODULE main
	VAR
		TimeLibrarySimple_duration_TIMERAPNEALAG: real; --controlled
		TimeLibrarySimple_duration_TIMEREXPIRATIONDUR: real; --controlled
		TimeLibrarySimple_duration_TIMERINSPIRATIONDUR: real; --controlled
		TimeLibrarySimple_duration_TIMERMAXEXPPAUSE: real; --controlled
		TimeLibrarySimple_duration_TIMERMAXINPAUSE: real; --controlled
		TimeLibrarySimple_duration_TIMERMAXINSPTIMEPSV: real; --controlled
		TimeLibrarySimple_duration_TIMERMAXRMTIME: real; --controlled
		TimeLibrarySimple_duration_TIMERMINEXPTIMEPSV: real; --controlled
		TimeLibrarySimple_duration_TIMERPAUSETIMEOUT: real; --controlled
		TimeLibrarySimple_duration_TIMERTRIGGERWINDOWDELAY: real; --controlled
		TimeLibrarySimple_mCurrTimeSecs: clock; --monitored  define clock
		TimeLibrarySimple_start_TIMERAPNEALAG: real; --controlled
		TimeLibrarySimple_start_TIMEREXPIRATIONDUR: real; --controlled
		TimeLibrarySimple_start_TIMERINSPIRATIONDUR: real; --controlled
		TimeLibrarySimple_start_TIMERMAXEXPPAUSE: real; --controlled
		TimeLibrarySimple_start_TIMERMAXINPAUSE: real; --controlled
		TimeLibrarySimple_start_TIMERMAXINSPTIMEPSV: real; --controlled
		TimeLibrarySimple_start_TIMERMAXRMTIME: real; --controlled
		TimeLibrarySimple_start_TIMERMINEXPTIMEPSV: real; --controlled
		TimeLibrarySimple_start_TIMERPAUSETIMEOUT: real; --controlled
		TimeLibrarySimple_start_TIMERTRIGGERWINDOWDELAY: real; --controlled
		apneaAlarm: boolean; --controlled
		apneaBackupMode: boolean; --controlled
		dropPAW_ITS_PCV: boolean; --monitored
		dropPAW_ITS_PSV: boolean; --monitored
		expPause: boolean; --monitored
		flowDropPSV: boolean; --monitored
		iValve: {CLOSED, OPEN, VALVESTATUS_UNDEF}; --controlled
		inPause: boolean; --monitored
		oValve: {CLOSED, OPEN, VALVESTATUS_UNDEF}; --controlled
		pauseOff: boolean; --controlled
		pawGTMaxPinsp: boolean; --monitored
		respirationMode: {PCV, PSV}; --monitored
		resume: boolean; --monitored
		rm: boolean; --monitored
		selfTestPassed: boolean; --monitored
		startVentilation: boolean; --monitored
		startupEnded: boolean; --monitored
		state: {OFF, PCV_EXP, PCV_EXP_PAUSE, PCV_INSP, PCV_IN_PAUSE, PCV_RM, PSV_EXP, PSV_EXP_PAUSE, PSV_INSP, PSV_IN_PAUSE, PSV_RM, SELFTEST, STARTUP, STATES_UNDEF, VENTILATIONOFF}; --controlled
		stopRequested: boolean; --monitored
		stopVentilation: boolean; --controlled
		turnOFFbtn: boolean; --monitored
		turnOffApneaAlarm: {NO, YES}; --monitored
	DEFINE
		TimeLibrarySimple_expired_TIMERINSPIRATIONDUR := (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERINSPIRATIONDUR + TimeLibrarySimple_duration_TIMERINSPIRATIONDUR));
		TimeLibrarySimple_expired_TIMERMAXINSPTIMEPSV := (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXINSPTIMEPSV + TimeLibrarySimple_duration_TIMERMAXINSPTIMEPSV));
		TimeLibrarySimple_expired_TIMERMAXRMTIME := (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXRMTIME + TimeLibrarySimple_duration_TIMERMAXRMTIME));
		TimeLibrarySimple_expired_TIMERPAUSETIMEOUT := (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERPAUSETIMEOUT + TimeLibrarySimple_duration_TIMERPAUSETIMEOUT));
	CONSTANTS YESORNO_UNDEF, NO, YES, TIMERINSPIRATIONDUR, TIMEREXPIRATIONDUR, TIMERMAXINSPTIMEPSV, TIMERMINEXPTIMEPSV, TIMERAPNEALAG, TIMERMAXINPAUSE, TIMERMAXRMTIME, TIMERMAXEXPPAUSE, TIMERTRIGGERWINDOWDELAY, TIMERPAUSETIMEOUT, TIMELIBRARYSIMPLE_TIMER_UNDEF, VALVESTATUS_UNDEF, CLOSED, OPEN, MODES_UNDEF, PCV, PSV, STATES_UNDEF, OFF, PCV_EXP, PCV_EXP_PAUSE, PCV_INSP, PCV_IN_PAUSE, PCV_RM, PSV_EXP, PSV_EXP_PAUSE, PSV_INSP, PSV_IN_PAUSE, PSV_RM, SELFTEST, STARTUP, VENTILATIONOFF;
	ASSIGN
		init(TimeLibrarySimple_mCurrTimeSecs):=0; -- init clock
		init(TimeLibrarySimple_duration_TIMERAPNEALAG) := 10.0;
		init(TimeLibrarySimple_duration_TIMEREXPIRATIONDUR) := 4.0;
		init(TimeLibrarySimple_duration_TIMERINSPIRATIONDUR) := 2.0;
		init(TimeLibrarySimple_duration_TIMERMAXEXPPAUSE) := 60.0;
		init(TimeLibrarySimple_duration_TIMERMAXINPAUSE) := 40.0;
		init(TimeLibrarySimple_duration_TIMERMAXINSPTIMEPSV) := 7.0;
		init(TimeLibrarySimple_duration_TIMERMAXRMTIME) := 10.0;
		init(TimeLibrarySimple_duration_TIMERMINEXPTIMEPSV) := 1.0;
		init(TimeLibrarySimple_duration_TIMERPAUSETIMEOUT) := 120.0;
		init(TimeLibrarySimple_duration_TIMERTRIGGERWINDOWDELAY) := 0.7;
		init(TimeLibrarySimple_start_TIMERAPNEALAG) := TimeLibrarySimple_mCurrTimeSecs;
		init(TimeLibrarySimple_start_TIMEREXPIRATIONDUR) := TimeLibrarySimple_mCurrTimeSecs;
		init(TimeLibrarySimple_start_TIMERINSPIRATIONDUR) := TimeLibrarySimple_mCurrTimeSecs;
		init(TimeLibrarySimple_start_TIMERMAXEXPPAUSE) := TimeLibrarySimple_mCurrTimeSecs;
		init(TimeLibrarySimple_start_TIMERMAXINPAUSE) := TimeLibrarySimple_mCurrTimeSecs;
		init(TimeLibrarySimple_start_TIMERMAXINSPTIMEPSV) := TimeLibrarySimple_mCurrTimeSecs;
		init(TimeLibrarySimple_start_TIMERMAXRMTIME) := TimeLibrarySimple_mCurrTimeSecs;
		init(TimeLibrarySimple_start_TIMERMINEXPTIMEPSV) := TimeLibrarySimple_mCurrTimeSecs;
		init(TimeLibrarySimple_start_TIMERPAUSETIMEOUT) := TimeLibrarySimple_mCurrTimeSecs;
		init(TimeLibrarySimple_start_TIMERTRIGGERWINDOWDELAY) := TimeLibrarySimple_mCurrTimeSecs;
		init(apneaAlarm) := FALSE;
		init(apneaBackupMode) := FALSE;
		init(iValve) := CLOSED;
		init(oValve) := OPEN;
		init(pauseOff) := FALSE;
		init(state) := STARTUP;
		init(stopVentilation) := FALSE;
		next(TimeLibrarySimple_duration_TIMERAPNEALAG) := TimeLibrarySimple_duration_TIMERAPNEALAG;
		next(TimeLibrarySimple_duration_TIMEREXPIRATIONDUR) := TimeLibrarySimple_duration_TIMEREXPIRATIONDUR;
		next(TimeLibrarySimple_duration_TIMERINSPIRATIONDUR) := TimeLibrarySimple_duration_TIMERINSPIRATIONDUR;
		next(TimeLibrarySimple_duration_TIMERMAXEXPPAUSE) := TimeLibrarySimple_duration_TIMERMAXEXPPAUSE;
		next(TimeLibrarySimple_duration_TIMERMAXINPAUSE) := TimeLibrarySimple_duration_TIMERMAXINPAUSE;
		next(TimeLibrarySimple_duration_TIMERMAXINSPTIMEPSV) := TimeLibrarySimple_duration_TIMERMAXINSPTIMEPSV;
		next(TimeLibrarySimple_duration_TIMERMAXRMTIME) := TimeLibrarySimple_duration_TIMERMAXRMTIME;
		next(TimeLibrarySimple_duration_TIMERMINEXPTIMEPSV) := TimeLibrarySimple_duration_TIMERMINEXPTIMEPSV;
		next(TimeLibrarySimple_duration_TIMERPAUSETIMEOUT) := TimeLibrarySimple_duration_TIMERPAUSETIMEOUT;
		next(TimeLibrarySimple_duration_TIMERTRIGGERWINDOWDELAY) := TimeLibrarySimple_duration_TIMERTRIGGERWINDOWDELAY;
		next(TimeLibrarySimple_start_TIMERAPNEALAG) :=
			case
				(((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & !(inPause) & (state = PSV_IN_PAUSE) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXINPAUSE + TimeLibrarySimple_duration_TIMERMAXINPAUSE))) | ((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXINPAUSE + TimeLibrarySimple_duration_TIMERMAXINPAUSE)) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_IN_PAUSE)) | ((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & pawGTMaxPinsp & (state = PSV_INSP) & !(TimeLibrarySimple_expired_TIMERMAXINSPTIMEPSV | flowDropPSV)) | ((!(stopRequested & (state = PSV_EXP)) & TimeLibrarySimple_expired_TIMERINSPIRATIONDUR & !(turnOFFbtn) & !(rm) & !(inPause & !(pauseOff)) & (respirationMode = PSV) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_INSP)) | (!(stopRequested & (state = PSV_EXP)) & (TimeLibrarySimple_expired_TIMERMAXINSPTIMEPSV | flowDropPSV) & !(turnOFFbtn) & !(rm) & !(inPause & !(pauseOff)) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_INSP)))))) | ((state = PSV_RM) & !(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (rm | TimeLibrarySimple_expired_TIMERMAXRMTIME))) : TimeLibrarySimple_mCurrTimeSecs;
				TRUE: TimeLibrarySimple_start_TIMERAPNEALAG;
			esac;
		next(TimeLibrarySimple_start_TIMEREXPIRATIONDUR) :=
			case
				(((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_IN_PAUSE) & !(inPause) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXINPAUSE + TimeLibrarySimple_duration_TIMERMAXINPAUSE))) | ((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXINPAUSE + TimeLibrarySimple_duration_TIMERMAXINPAUSE)) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_IN_PAUSE)) | ((!(stopRequested & (state = PSV_EXP)) & TimeLibrarySimple_expired_TIMERINSPIRATIONDUR & !(turnOFFbtn) & !(rm) & !(inPause & !(pauseOff)) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_INSP) & !(respirationMode = PSV)) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_INSP) & !(TimeLibrarySimple_expired_TIMERINSPIRATIONDUR) & pawGTMaxPinsp)))) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & (state = PCV_RM) & !(stopRequested & (state = PCV_EXP)) & (rm | TimeLibrarySimple_expired_TIMERMAXRMTIME))): TimeLibrarySimple_mCurrTimeSecs;
				TRUE: TimeLibrarySimple_start_TIMEREXPIRATIONDUR;
			esac;
		next(TimeLibrarySimple_start_TIMERINSPIRATIONDUR) :=
			case
				(((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_EXP) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERAPNEALAG + TimeLibrarySimple_duration_TIMERAPNEALAG)) & !(dropPAW_ITS_PSV & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERTRIGGERWINDOWDELAY + TimeLibrarySimple_duration_TIMERTRIGGERWINDOWDELAY)))) | (((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_EXP_PAUSE) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXEXPPAUSE + TimeLibrarySimple_duration_TIMERMAXEXPPAUSE))) | (((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_EXP) & !(!(pauseOff) & expPause) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMEREXPIRATIONDUR + TimeLibrarySimple_duration_TIMEREXPIRATIONDUR))) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & startVentilation & (respirationMode = PCV) & !(stopRequested & (state = PCV_EXP)) & (state = VENTILATIONOFF))) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & dropPAW_ITS_PCV & (state = PCV_EXP) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERTRIGGERWINDOWDELAY + TimeLibrarySimple_duration_TIMERTRIGGERWINDOWDELAY)) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMEREXPIRATIONDUR + TimeLibrarySimple_duration_TIMEREXPIRATIONDUR))))) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(expPause) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_EXP_PAUSE) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXEXPPAUSE + TimeLibrarySimple_duration_TIMERMAXEXPPAUSE))))) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !((((respirationMode = PSV) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMINEXPTIMEPSV + TimeLibrarySimple_duration_TIMERMINEXPTIMEPSV))) & expPause) & !(pauseOff)) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERAPNEALAG + TimeLibrarySimple_duration_TIMERAPNEALAG)) & !(stopRequested & (state = PCV_EXP)) & ((respirationMode = PCV) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMINEXPTIMEPSV + TimeLibrarySimple_duration_TIMERMINEXPTIMEPSV))) & (state = PSV_EXP) & !(stopVentilation) & !(dropPAW_ITS_PSV & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERTRIGGERWINDOWDELAY + TimeLibrarySimple_duration_TIMERTRIGGERWINDOWDELAY))))): TimeLibrarySimple_mCurrTimeSecs;
				TRUE: TimeLibrarySimple_start_TIMERINSPIRATIONDUR;
			esac;
		next(TimeLibrarySimple_start_TIMERMAXEXPPAUSE) :=
			case
				((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERAPNEALAG + TimeLibrarySimple_duration_TIMERAPNEALAG)) & ((((respirationMode = PSV) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMINEXPTIMEPSV + TimeLibrarySimple_duration_TIMERMINEXPTIMEPSV))) & expPause) & !(pauseOff)) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_EXP) & !(dropPAW_ITS_PSV & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERTRIGGERWINDOWDELAY + TimeLibrarySimple_duration_TIMERTRIGGERWINDOWDELAY)))) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_EXP) & (!(pauseOff) & expPause) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMEREXPIRATIONDUR + TimeLibrarySimple_duration_TIMEREXPIRATIONDUR)))): TimeLibrarySimple_mCurrTimeSecs;
				TRUE: TimeLibrarySimple_start_TIMERMAXEXPPAUSE;
			esac;
		next(TimeLibrarySimple_start_TIMERMAXINPAUSE) :=
			case
				(((inPause & !(pauseOff)) & !(stopRequested & (state = PSV_EXP)) & (TimeLibrarySimple_expired_TIMERMAXINSPTIMEPSV | flowDropPSV) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_INSP)) | (((inPause & !(pauseOff)) & !(stopRequested & (state = PSV_EXP)) & TimeLibrarySimple_expired_TIMERINSPIRATIONDUR & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_INSP) & !(respirationMode = PSV)) | ((inPause & !(pauseOff)) & !(stopRequested & (state = PSV_EXP)) & TimeLibrarySimple_expired_TIMERINSPIRATIONDUR & !(turnOFFbtn) & (respirationMode = PSV) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_INSP)))): TimeLibrarySimple_mCurrTimeSecs;
				TRUE: TimeLibrarySimple_start_TIMERMAXINPAUSE;
			esac;
		next(TimeLibrarySimple_start_TIMERMAXINSPTIMEPSV) :=
			case
				((((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & startVentilation & (respirationMode = PSV) & !(stopRequested & (state = PCV_EXP)) & !(respirationMode = PCV) & (state = VENTILATIONOFF)) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & (dropPAW_ITS_PSV & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERTRIGGERWINDOWDELAY + TimeLibrarySimple_duration_TIMERTRIGGERWINDOWDELAY))) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_EXP))) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_EXP_PAUSE) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXEXPPAUSE + TimeLibrarySimple_duration_TIMERMAXEXPPAUSE)))) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(expPause) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_EXP_PAUSE) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXEXPPAUSE + TimeLibrarySimple_duration_TIMERMAXEXPPAUSE)))): TimeLibrarySimple_mCurrTimeSecs;
				TRUE: TimeLibrarySimple_start_TIMERMAXINSPTIMEPSV;
			esac;
		next(TimeLibrarySimple_start_TIMERMAXRMTIME) :=
			case
				(((!(stopRequested & (state = PSV_EXP)) & TimeLibrarySimple_expired_TIMERINSPIRATIONDUR & !(turnOFFbtn) & !(inPause & !(pauseOff)) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_INSP) & !(respirationMode = PSV) & rm) | (!(stopRequested & (state = PSV_EXP)) & TimeLibrarySimple_expired_TIMERINSPIRATIONDUR & !(turnOFFbtn) & !(inPause & !(pauseOff)) & (respirationMode = PSV) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_INSP) & rm)) | (!(stopRequested & (state = PSV_EXP)) & (TimeLibrarySimple_expired_TIMERMAXINSPTIMEPSV | flowDropPSV) & !(turnOFFbtn) & !(inPause & !(pauseOff)) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_INSP) & rm)): TimeLibrarySimple_mCurrTimeSecs;
				TRUE: TimeLibrarySimple_start_TIMERMAXRMTIME;
			esac;
		next(TimeLibrarySimple_start_TIMERMINEXPTIMEPSV) :=
			case
				(((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & !(inPause) & (state = PSV_IN_PAUSE) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXINPAUSE + TimeLibrarySimple_duration_TIMERMAXINPAUSE))) | ((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXINPAUSE + TimeLibrarySimple_duration_TIMERMAXINPAUSE)) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_IN_PAUSE)) | ((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & pawGTMaxPinsp & (state = PSV_INSP) & !(TimeLibrarySimple_expired_TIMERMAXINSPTIMEPSV | flowDropPSV)) | ((!(stopRequested & (state = PSV_EXP)) & TimeLibrarySimple_expired_TIMERINSPIRATIONDUR & !(turnOFFbtn) & !(rm) & !(inPause & !(pauseOff)) & (respirationMode = PSV) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_INSP)) | (!(stopRequested & (state = PSV_EXP)) & (TimeLibrarySimple_expired_TIMERMAXINSPTIMEPSV | flowDropPSV) & !(turnOFFbtn) & !(rm) & !(inPause & !(pauseOff)) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_INSP)))))) | ((state = PSV_RM) & !(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (rm | TimeLibrarySimple_expired_TIMERMAXRMTIME))): TimeLibrarySimple_mCurrTimeSecs;
				TRUE: TimeLibrarySimple_start_TIMERMINEXPTIMEPSV;
			esac;
		next(TimeLibrarySimple_start_TIMERPAUSETIMEOUT) :=
			case
				(((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXINPAUSE + TimeLibrarySimple_duration_TIMERMAXINPAUSE)) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_IN_PAUSE)) | ((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXINPAUSE + TimeLibrarySimple_duration_TIMERMAXINPAUSE)) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_IN_PAUSE)) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_EXP_PAUSE) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXEXPPAUSE + TimeLibrarySimple_duration_TIMERMAXEXPPAUSE))))) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_EXP_PAUSE) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXEXPPAUSE + TimeLibrarySimple_duration_TIMERMAXEXPPAUSE)))): TimeLibrarySimple_mCurrTimeSecs;
				TRUE: TimeLibrarySimple_start_TIMERPAUSETIMEOUT;
			esac;
		next(TimeLibrarySimple_start_TIMERTRIGGERWINDOWDELAY) :=
			case
				(((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & !(inPause) & (state = PSV_IN_PAUSE) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXINPAUSE + TimeLibrarySimple_duration_TIMERMAXINPAUSE))) | ((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXINPAUSE + TimeLibrarySimple_duration_TIMERMAXINPAUSE)) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_IN_PAUSE)) | (((((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_IN_PAUSE) & !(inPause) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXINPAUSE + TimeLibrarySimple_duration_TIMERMAXINPAUSE))) | ((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXINPAUSE + TimeLibrarySimple_duration_TIMERMAXINPAUSE)) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_IN_PAUSE)) | ((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_INSP) & !(TimeLibrarySimple_expired_TIMERINSPIRATIONDUR) & pawGTMaxPinsp) | ((!(stopRequested & (state = PSV_EXP)) & TimeLibrarySimple_expired_TIMERINSPIRATIONDUR & !(turnOFFbtn) & !(rm) & !(inPause & !(pauseOff)) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_INSP) & !(respirationMode = PSV)) | (!(stopRequested & (state = PSV_EXP)) & TimeLibrarySimple_expired_TIMERINSPIRATIONDUR & !(turnOFFbtn) & !(rm) & !(inPause & !(pauseOff)) & (respirationMode = PSV) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_INSP)))))) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & (state = PCV_RM) & !(stopRequested & (state = PCV_EXP)) & (rm | TimeLibrarySimple_expired_TIMERMAXRMTIME))) | (!(stopRequested & (state = PSV_EXP)) & (TimeLibrarySimple_expired_TIMERMAXINSPTIMEPSV | flowDropPSV) & !(turnOFFbtn) & !(rm) & !(inPause & !(pauseOff)) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_INSP))) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & pawGTMaxPinsp & (state = PSV_INSP) & !(TimeLibrarySimple_expired_TIMERMAXINSPTIMEPSV | flowDropPSV))))) | ((state = PSV_RM) & !(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (rm | TimeLibrarySimple_expired_TIMERMAXRMTIME))): TimeLibrarySimple_mCurrTimeSecs;
				TRUE: TimeLibrarySimple_start_TIMERTRIGGERWINDOWDELAY;
			esac;
		next(apneaAlarm) :=
			case
				(!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_EXP) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERAPNEALAG + TimeLibrarySimple_duration_TIMERAPNEALAG)) & !(dropPAW_ITS_PSV & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERTRIGGERWINDOWDELAY + TimeLibrarySimple_duration_TIMERTRIGGERWINDOWDELAY)))): TRUE;
				(!(stopRequested & (state = PSV_EXP)) & apneaAlarm & !(turnOFFbtn) & ((turnOffApneaAlarm = YES) & ((state = PCV_INSP) | (state = PCV_EXP))) & !(stopRequested & (state = PCV_EXP))): FALSE;
				TRUE: apneaAlarm;
			esac;
		next(apneaBackupMode) :=
			case
				(!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_EXP) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERAPNEALAG + TimeLibrarySimple_duration_TIMERAPNEALAG)) & !(dropPAW_ITS_PSV & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERTRIGGERWINDOWDELAY + TimeLibrarySimple_duration_TIMERTRIGGERWINDOWDELAY)))): TRUE;
				((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERTRIGGERWINDOWDELAY + TimeLibrarySimple_duration_TIMERTRIGGERWINDOWDELAY)) & stopVentilation & (state = PCV_EXP) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMEREXPIRATIONDUR + TimeLibrarySimple_duration_TIMEREXPIRATIONDUR))) | (((!(stopRequested & (state = PSV_EXP)) & TimeLibrarySimple_expired_TIMERINSPIRATIONDUR & !(turnOFFbtn) & !(rm) & !(inPause & !(pauseOff)) & (respirationMode = PSV) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_INSP)) | ((!(stopRequested & (state = PSV_EXP)) & TimeLibrarySimple_expired_TIMERINSPIRATIONDUR & !(turnOFFbtn) & !(inPause & !(pauseOff)) & (respirationMode = PSV) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_INSP) & rm) | ((!(turnOFFbtn) & (stopRequested & (state = PCV_EXP))) | ((inPause & !(pauseOff)) & !(stopRequested & (state = PSV_EXP)) & TimeLibrarySimple_expired_TIMERINSPIRATIONDUR & !(turnOFFbtn) & (respirationMode = PSV) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_INSP))))) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(dropPAW_ITS_PCV) & !(stopRequested & (state = PCV_EXP)) & stopVentilation & (state = PCV_EXP) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERTRIGGERWINDOWDELAY + TimeLibrarySimple_duration_TIMERTRIGGERWINDOWDELAY)) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMEREXPIRATIONDUR + TimeLibrarySimple_duration_TIMEREXPIRATIONDUR))))): FALSE;
				TRUE: apneaBackupMode;
			esac;
		next(iValve) :=
			case
				(((((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_EXP) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERAPNEALAG + TimeLibrarySimple_duration_TIMERAPNEALAG)) & !(dropPAW_ITS_PSV & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERTRIGGERWINDOWDELAY + TimeLibrarySimple_duration_TIMERTRIGGERWINDOWDELAY)))) | ((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & (dropPAW_ITS_PSV & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERTRIGGERWINDOWDELAY + TimeLibrarySimple_duration_TIMERTRIGGERWINDOWDELAY))) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_EXP)) | ((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(expPause) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_EXP_PAUSE) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXEXPPAUSE + TimeLibrarySimple_duration_TIMERMAXEXPPAUSE))) | ((((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_EXP) & !(!(pauseOff) & expPause) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMEREXPIRATIONDUR + TimeLibrarySimple_duration_TIMEREXPIRATIONDUR))) | ((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & startVentilation & (respirationMode = PSV) & !(stopRequested & (state = PCV_EXP)) & !(respirationMode = PCV) & (state = VENTILATIONOFF)) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & startVentilation & (respirationMode = PCV) & !(stopRequested & (state = PCV_EXP)) & (state = VENTILATIONOFF)))) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & dropPAW_ITS_PCV & (state = PCV_EXP) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERTRIGGERWINDOWDELAY + TimeLibrarySimple_duration_TIMERTRIGGERWINDOWDELAY)) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMEREXPIRATIONDUR + TimeLibrarySimple_duration_TIMEREXPIRATIONDUR)))) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_EXP_PAUSE) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXEXPPAUSE + TimeLibrarySimple_duration_TIMERMAXEXPPAUSE))))))) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !((((respirationMode = PSV) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMINEXPTIMEPSV + TimeLibrarySimple_duration_TIMERMINEXPTIMEPSV))) & expPause) & !(pauseOff)) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERAPNEALAG + TimeLibrarySimple_duration_TIMERAPNEALAG)) & !(stopRequested & (state = PCV_EXP)) & ((respirationMode = PCV) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMINEXPTIMEPSV + TimeLibrarySimple_duration_TIMERMINEXPTIMEPSV))) & (state = PSV_EXP) & !(stopVentilation) & !(dropPAW_ITS_PSV & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERTRIGGERWINDOWDELAY + TimeLibrarySimple_duration_TIMERTRIGGERWINDOWDELAY))))) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_EXP_PAUSE) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXEXPPAUSE + TimeLibrarySimple_duration_TIMERMAXEXPPAUSE)))) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(expPause) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_EXP_PAUSE) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXEXPPAUSE + TimeLibrarySimple_duration_TIMERMAXEXPPAUSE)))): OPEN;
				(((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & pawGTMaxPinsp & (state = PSV_INSP) & !(TimeLibrarySimple_expired_TIMERMAXINSPTIMEPSV | flowDropPSV)) | (((((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_INSP) & !(TimeLibrarySimple_expired_TIMERINSPIRATIONDUR) & pawGTMaxPinsp) | ((!(stopRequested & (state = PSV_EXP)) & TimeLibrarySimple_expired_TIMERINSPIRATIONDUR & !(turnOFFbtn) & !(rm) & !(inPause & !(pauseOff)) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_INSP) & !(respirationMode = PSV)) | (((inPause & !(pauseOff)) & !(stopRequested & (state = PSV_EXP)) & TimeLibrarySimple_expired_TIMERINSPIRATIONDUR & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_INSP) & !(respirationMode = PSV)) | ((turnOFFbtn | ((inPause & !(pauseOff)) & !(stopRequested & (state = PSV_EXP)) & TimeLibrarySimple_expired_TIMERINSPIRATIONDUR & !(turnOFFbtn) & (respirationMode = PSV) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_INSP))) | (!(stopRequested & (state = PSV_EXP)) & TimeLibrarySimple_expired_TIMERINSPIRATIONDUR & !(turnOFFbtn) & !(rm) & !(inPause & !(pauseOff)) & (respirationMode = PSV) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_INSP)))))) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & (state = PCV_RM) & !(stopRequested & (state = PCV_EXP)) & (rm | TimeLibrarySimple_expired_TIMERMAXRMTIME))) | ((inPause & !(pauseOff)) & !(stopRequested & (state = PSV_EXP)) & (TimeLibrarySimple_expired_TIMERMAXINSPTIMEPSV | flowDropPSV) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_INSP))) | (!(stopRequested & (state = PSV_EXP)) & (TimeLibrarySimple_expired_TIMERMAXINSPTIMEPSV | flowDropPSV) & !(turnOFFbtn) & !(rm) & !(inPause & !(pauseOff)) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_INSP)))) | ((state = PSV_RM) & !(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (rm | TimeLibrarySimple_expired_TIMERMAXRMTIME))): CLOSED;
				TRUE: iValve;
			esac;
		next(oValve) :=
			case
				(((state = PSV_RM) & !(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (rm | TimeLibrarySimple_expired_TIMERMAXRMTIME)) | (((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXINPAUSE + TimeLibrarySimple_duration_TIMERMAXINPAUSE)) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_IN_PAUSE)) | (((!(stopRequested & (state = PSV_EXP)) & (TimeLibrarySimple_expired_TIMERMAXINSPTIMEPSV | flowDropPSV) & !(turnOFFbtn) & !(rm) & !(inPause & !(pauseOff)) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_INSP)) | (((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_IN_PAUSE) & !(inPause) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXINPAUSE + TimeLibrarySimple_duration_TIMERMAXINPAUSE))) | ((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXINPAUSE + TimeLibrarySimple_duration_TIMERMAXINPAUSE)) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_IN_PAUSE)) | ((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_INSP) & !(TimeLibrarySimple_expired_TIMERINSPIRATIONDUR) & pawGTMaxPinsp) | ((!(stopRequested & (state = PSV_EXP)) & TimeLibrarySimple_expired_TIMERINSPIRATIONDUR & !(turnOFFbtn) & !(rm) & !(inPause & !(pauseOff)) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_INSP) & !(respirationMode = PSV)) | (turnOFFbtn | (!(stopRequested & (state = PSV_EXP)) & TimeLibrarySimple_expired_TIMERINSPIRATIONDUR & !(turnOFFbtn) & !(rm) & !(inPause & !(pauseOff)) & (respirationMode = PSV) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_INSP))))))) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & (state = PCV_RM) & !(stopRequested & (state = PCV_EXP)) & (rm | TimeLibrarySimple_expired_TIMERMAXRMTIME)))) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & pawGTMaxPinsp & (state = PSV_INSP) & !(TimeLibrarySimple_expired_TIMERMAXINSPTIMEPSV | flowDropPSV)))) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & !(inPause) & (state = PSV_IN_PAUSE) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXINPAUSE + TimeLibrarySimple_duration_TIMERMAXINPAUSE))))): OPEN;
				((((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_EXP) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERAPNEALAG + TimeLibrarySimple_duration_TIMERAPNEALAG)) & !(dropPAW_ITS_PSV & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERTRIGGERWINDOWDELAY + TimeLibrarySimple_duration_TIMERTRIGGERWINDOWDELAY)))) | ((((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_EXP) & !(!(pauseOff) & expPause) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMEREXPIRATIONDUR + TimeLibrarySimple_duration_TIMEREXPIRATIONDUR))) | (((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & startVentilation & (respirationMode = PSV) & !(stopRequested & (state = PCV_EXP)) & !(respirationMode = PCV) & (state = VENTILATIONOFF)) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & startVentilation & (respirationMode = PCV) & !(stopRequested & (state = PCV_EXP)) & (state = VENTILATIONOFF))) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_EXP) & (!(pauseOff) & expPause) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMEREXPIRATIONDUR + TimeLibrarySimple_duration_TIMEREXPIRATIONDUR))))) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & dropPAW_ITS_PCV & (state = PCV_EXP) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERTRIGGERWINDOWDELAY + TimeLibrarySimple_duration_TIMERTRIGGERWINDOWDELAY)) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMEREXPIRATIONDUR + TimeLibrarySimple_duration_TIMEREXPIRATIONDUR)))) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & (dropPAW_ITS_PSV & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERTRIGGERWINDOWDELAY + TimeLibrarySimple_duration_TIMERTRIGGERWINDOWDELAY))) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_EXP)))) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERAPNEALAG + TimeLibrarySimple_duration_TIMERAPNEALAG)) & ((((respirationMode = PSV) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMINEXPTIMEPSV + TimeLibrarySimple_duration_TIMERMINEXPTIMEPSV))) & expPause) & !(pauseOff)) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_EXP) & !(dropPAW_ITS_PSV & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERTRIGGERWINDOWDELAY + TimeLibrarySimple_duration_TIMERTRIGGERWINDOWDELAY))))) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !((((respirationMode = PSV) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMINEXPTIMEPSV + TimeLibrarySimple_duration_TIMERMINEXPTIMEPSV))) & expPause) & !(pauseOff)) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERAPNEALAG + TimeLibrarySimple_duration_TIMERAPNEALAG)) & !(stopRequested & (state = PCV_EXP)) & ((respirationMode = PCV) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMINEXPTIMEPSV + TimeLibrarySimple_duration_TIMERMINEXPTIMEPSV))) & (state = PSV_EXP) & !(stopVentilation) & !(dropPAW_ITS_PSV & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERTRIGGERWINDOWDELAY + TimeLibrarySimple_duration_TIMERTRIGGERWINDOWDELAY))))): CLOSED;
				TRUE: oValve;
			esac;
		next(pauseOff) :=
			case
				(((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXINPAUSE + TimeLibrarySimple_duration_TIMERMAXINPAUSE)) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_IN_PAUSE)) | ((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXINPAUSE + TimeLibrarySimple_duration_TIMERMAXINPAUSE)) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_IN_PAUSE)) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_EXP_PAUSE) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXEXPPAUSE + TimeLibrarySimple_duration_TIMERMAXEXPPAUSE))))) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_EXP_PAUSE) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXEXPPAUSE + TimeLibrarySimple_duration_TIMERMAXEXPPAUSE)))): TRUE;
				(!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & ((((state != PSV_IN_PAUSE) & ((state != PCV_IN_PAUSE) & TimeLibrarySimple_expired_TIMERPAUSETIMEOUT)) & (state != PCV_EXP_PAUSE)) & (state != PSV_EXP_PAUSE))): FALSE;
				TRUE: pauseOff;
			esac;
		next(state) :=
			case
				(!(stopRequested & (state = PSV_EXP)) & TimeLibrarySimple_expired_TIMERINSPIRATIONDUR & !(turnOFFbtn) & !(inPause & !(pauseOff)) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_INSP) & !(respirationMode = PSV) & rm): PCV_RM;
				((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !((((respirationMode = PSV) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMINEXPTIMEPSV + TimeLibrarySimple_duration_TIMERMINEXPTIMEPSV))) & expPause) & !(pauseOff)) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERAPNEALAG + TimeLibrarySimple_duration_TIMERAPNEALAG)) & !(stopRequested & (state = PCV_EXP)) & stopVentilation & (state = PSV_EXP) & !(dropPAW_ITS_PSV & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERTRIGGERWINDOWDELAY + TimeLibrarySimple_duration_TIMERTRIGGERWINDOWDELAY)))) | ((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERTRIGGERWINDOWDELAY + TimeLibrarySimple_duration_TIMERTRIGGERWINDOWDELAY)) & stopVentilation & (state = PCV_EXP) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMEREXPIRATIONDUR + TimeLibrarySimple_duration_TIMEREXPIRATIONDUR))) | ((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(dropPAW_ITS_PCV) & !(stopRequested & (state = PCV_EXP)) & stopVentilation & (state = PCV_EXP) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERTRIGGERWINDOWDELAY + TimeLibrarySimple_duration_TIMERTRIGGERWINDOWDELAY)) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMEREXPIRATIONDUR + TimeLibrarySimple_duration_TIMEREXPIRATIONDUR))) | ((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = SELFTEST) & (resume | selfTestPassed)) | ((!(turnOFFbtn) & (stopRequested & (state = PCV_EXP))) | (!(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (stopRequested & (state = PSV_EXP)))))))): VENTILATIONOFF;
				((inPause & !(pauseOff)) & !(stopRequested & (state = PSV_EXP)) & TimeLibrarySimple_expired_TIMERINSPIRATIONDUR & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_INSP) & !(respirationMode = PSV)): PCV_IN_PAUSE;
				(turnOFFbtn): OFF;
				(((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & !(inPause) & (state = PSV_IN_PAUSE) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXINPAUSE + TimeLibrarySimple_duration_TIMERMAXINPAUSE))) | ((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXINPAUSE + TimeLibrarySimple_duration_TIMERMAXINPAUSE)) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_IN_PAUSE)) | ((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & pawGTMaxPinsp & (state = PSV_INSP) & !(TimeLibrarySimple_expired_TIMERMAXINSPTIMEPSV | flowDropPSV)) | ((!(stopRequested & (state = PSV_EXP)) & TimeLibrarySimple_expired_TIMERINSPIRATIONDUR & !(turnOFFbtn) & !(rm) & !(inPause & !(pauseOff)) & (respirationMode = PSV) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_INSP)) | (!(stopRequested & (state = PSV_EXP)) & (TimeLibrarySimple_expired_TIMERMAXINSPTIMEPSV | flowDropPSV) & !(turnOFFbtn) & !(rm) & !(inPause & !(pauseOff)) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_INSP)))))) | ((state = PSV_RM) & !(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (rm | TimeLibrarySimple_expired_TIMERMAXRMTIME))): PSV_EXP;
				(((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_EXP) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERAPNEALAG + TimeLibrarySimple_duration_TIMERAPNEALAG)) & !(dropPAW_ITS_PSV & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERTRIGGERWINDOWDELAY + TimeLibrarySimple_duration_TIMERTRIGGERWINDOWDELAY)))) | (((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_EXP_PAUSE) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXEXPPAUSE + TimeLibrarySimple_duration_TIMERMAXEXPPAUSE))) | (((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_EXP) & !(!(pauseOff) & expPause) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMEREXPIRATIONDUR + TimeLibrarySimple_duration_TIMEREXPIRATIONDUR))) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & startVentilation & (respirationMode = PCV) & !(stopRequested & (state = PCV_EXP)) & (state = VENTILATIONOFF))) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & dropPAW_ITS_PCV & (state = PCV_EXP) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERTRIGGERWINDOWDELAY + TimeLibrarySimple_duration_TIMERTRIGGERWINDOWDELAY)) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMEREXPIRATIONDUR + TimeLibrarySimple_duration_TIMEREXPIRATIONDUR))))) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(expPause) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_EXP_PAUSE) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXEXPPAUSE + TimeLibrarySimple_duration_TIMERMAXEXPPAUSE))))) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !((((respirationMode = PSV) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMINEXPTIMEPSV + TimeLibrarySimple_duration_TIMERMINEXPTIMEPSV))) & expPause) & !(pauseOff)) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERAPNEALAG + TimeLibrarySimple_duration_TIMERAPNEALAG)) & !(stopRequested & (state = PCV_EXP)) & ((respirationMode = PCV) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMINEXPTIMEPSV + TimeLibrarySimple_duration_TIMERMINEXPTIMEPSV))) & (state = PSV_EXP) & !(stopVentilation) & !(dropPAW_ITS_PSV & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERTRIGGERWINDOWDELAY + TimeLibrarySimple_duration_TIMERTRIGGERWINDOWDELAY))))): PCV_INSP;
				(!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & (state = STARTUP) & !(stopRequested & (state = PCV_EXP)) & startupEnded): SELFTEST;
				((((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & startVentilation & (respirationMode = PSV) & !(stopRequested & (state = PCV_EXP)) & !(respirationMode = PCV) & (state = VENTILATIONOFF)) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & (dropPAW_ITS_PSV & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERTRIGGERWINDOWDELAY + TimeLibrarySimple_duration_TIMERTRIGGERWINDOWDELAY))) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_EXP))) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_EXP_PAUSE) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXEXPPAUSE + TimeLibrarySimple_duration_TIMERMAXEXPPAUSE)))) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(expPause) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_EXP_PAUSE) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXEXPPAUSE + TimeLibrarySimple_duration_TIMERMAXEXPPAUSE)))): PSV_INSP;
				((!(stopRequested & (state = PSV_EXP)) & TimeLibrarySimple_expired_TIMERINSPIRATIONDUR & !(turnOFFbtn) & !(inPause & !(pauseOff)) & (respirationMode = PSV) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_INSP) & rm) | (!(stopRequested & (state = PSV_EXP)) & (TimeLibrarySimple_expired_TIMERMAXINSPTIMEPSV | flowDropPSV) & !(turnOFFbtn) & !(inPause & !(pauseOff)) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_INSP) & rm)): PSV_RM;
				(((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_IN_PAUSE) & !(inPause) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXINPAUSE + TimeLibrarySimple_duration_TIMERMAXINPAUSE))) | ((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMAXINPAUSE + TimeLibrarySimple_duration_TIMERMAXINPAUSE)) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_IN_PAUSE)) | ((!(stopRequested & (state = PSV_EXP)) & TimeLibrarySimple_expired_TIMERINSPIRATIONDUR & !(turnOFFbtn) & !(rm) & !(inPause & !(pauseOff)) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_INSP) & !(respirationMode = PSV)) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_INSP) & !(TimeLibrarySimple_expired_TIMERINSPIRATIONDUR) & pawGTMaxPinsp)))) | (!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & (state = PCV_RM) & !(stopRequested & (state = PCV_EXP)) & (rm | TimeLibrarySimple_expired_TIMERMAXRMTIME))): PCV_EXP;
				(((inPause & !(pauseOff)) & !(stopRequested & (state = PSV_EXP)) & (TimeLibrarySimple_expired_TIMERMAXINSPTIMEPSV | flowDropPSV) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_INSP)) | ((inPause & !(pauseOff)) & !(stopRequested & (state = PSV_EXP)) & TimeLibrarySimple_expired_TIMERINSPIRATIONDUR & !(turnOFFbtn) & (respirationMode = PSV) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_INSP))): PSV_IN_PAUSE;
				(!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERAPNEALAG + TimeLibrarySimple_duration_TIMERAPNEALAG)) & ((((respirationMode = PSV) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMINEXPTIMEPSV + TimeLibrarySimple_duration_TIMERMINEXPTIMEPSV))) & expPause) & !(pauseOff)) & !(stopRequested & (state = PCV_EXP)) & (state = PSV_EXP) & !(dropPAW_ITS_PSV & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERTRIGGERWINDOWDELAY + TimeLibrarySimple_duration_TIMERTRIGGERWINDOWDELAY)))): PSV_EXP_PAUSE;
				(!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (state = PCV_EXP) & (!(pauseOff) & expPause) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMEREXPIRATIONDUR + TimeLibrarySimple_duration_TIMEREXPIRATIONDUR))): PCV_EXP_PAUSE;
				TRUE: state;
			esac;
		next(stopVentilation) :=
			case
				(!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & ((state != VENTILATIONOFF) & ((stopRequested & (state != STARTUP)) & (state != SELFTEST)))): TRUE;
				((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !((((respirationMode = PSV) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERMINEXPTIMEPSV + TimeLibrarySimple_duration_TIMERMINEXPTIMEPSV))) & expPause) & !(pauseOff)) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERAPNEALAG + TimeLibrarySimple_duration_TIMERAPNEALAG)) & !(stopRequested & (state = PCV_EXP)) & stopVentilation & (state = PSV_EXP) & !(dropPAW_ITS_PSV & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERTRIGGERWINDOWDELAY + TimeLibrarySimple_duration_TIMERTRIGGERWINDOWDELAY)))) | ((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERTRIGGERWINDOWDELAY + TimeLibrarySimple_duration_TIMERTRIGGERWINDOWDELAY)) & stopVentilation & (state = PCV_EXP) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMEREXPIRATIONDUR + TimeLibrarySimple_duration_TIMEREXPIRATIONDUR))) | ((!(stopRequested & (state = PSV_EXP)) & !(turnOFFbtn) & !(dropPAW_ITS_PCV) & !(stopRequested & (state = PCV_EXP)) & stopVentilation & (state = PCV_EXP) & (TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMERTRIGGERWINDOWDELAY + TimeLibrarySimple_duration_TIMERTRIGGERWINDOWDELAY)) & !(TimeLibrarySimple_mCurrTimeSecs >= (TimeLibrarySimple_start_TIMEREXPIRATIONDUR + TimeLibrarySimple_duration_TIMEREXPIRATIONDUR))) | ((!(turnOFFbtn) & (stopRequested & (state = PCV_EXP))) | (!(turnOFFbtn) & !(stopRequested & (state = PCV_EXP)) & (stopRequested & (state = PSV_EXP))))))): FALSE;
				TRUE: stopVentilation;
			esac;
--CTL properties
LTLSPEC NAME ltl0 :=  (G(!(turnOFFbtn)) -> F(((oValve = CLOSED) & (iValve = CLOSED))));
--CTLSPEC NAME ctl0 := (AG(!(turnOFFbtn)) -> EF(((oValve = CLOSED) & (iValve = CLOSED))));
--CTLSPEC NAME ctl1 := (AG(!(turnOFFbtn)) -> EF(((oValve = OPEN) & (iValve = OPEN))));
--CTLSPEC NAME ctl2 := !(EF(((state != PSV_EXP_PAUSE) & ((((state != PCV_IN_PAUSE) & ((oValve = CLOSED) & (iValve = CLOSED))) & (state != PCV_EXP_PAUSE)) & (state != PSV_IN_PAUSE)))));
--CTLSPEC NAME ctl3 := !(EF((((state != PSV_IN_PAUSE) & ((state != PCV_EXP_PAUSE) & ((state != PCV_IN_PAUSE) & ((oValve = OPEN) & (iValve = OPEN))))) & (state != PSV_EXP_PAUSE))));
--CTLSPEC NAME ctl4 := AG((((oValve = CLOSED) & (iValve = CLOSED)) -> ((((state = PCV_IN_PAUSE) | (state = PCV_EXP_PAUSE)) | (state = PSV_IN_PAUSE)) | (state = PSV_EXP_PAUSE))));
--CTLSPEC NAME ctl5 := AG(((state = VENTILATIONOFF) -> ((oValve = OPEN) & (iValve = CLOSED))));
--CTLSPEC NAME ctl6 := (AG(!(turnOFFbtn)) -> AG(EF((state = VENTILATIONOFF))));
--CTLSPEC NAME ctl7 := AG(((state = OFF) -> AG((state = OFF))));
